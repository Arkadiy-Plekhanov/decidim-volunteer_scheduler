Perfect—here’s the completed Phase 1 specification with those details baked in:

---

## 1. Failed Assignments & Retry

* **Volunteer UI**: In their dashboard under “Failed Assignments,” each entry shows a **Retry** button. Clicking it:

  1. Clones the original assignment (new `TaskAssignment` in `pending` status).
  2. Removes the old failed record from view.
* Once there are no failed assignments, the entire “Failed Assignments” section hides.

---

## 2. Monthly Statement (Email)

**Best-Practice Structure** (marketing-friendly):

1. **Personalized Greeting**
   “Hi Alice, here’s your Monthly Volunteer Summary!”

2. **Highlights**

   * **Total XP Earned** this month
   * **Total Scicent Sales** processed
   * **Referral Bonuses** credited

3. **Top Achievements**

   * **Top 3 Tasks Completed** (with icons)
   * **Top 3 Referrals by Activity**

4. **New Perks Unlocked**

   * List any new capabilities (e.g. “Access to Intermediate Tasks”)

5. **Call to Action**

   * “Accept your next tasks now—your pool is refreshed daily!”
   * Link back to dashboard

6. **Footer**

   * Link to support
   * Unsubscribe/manage notifications

> This layout drives engagement by celebrating achievements, reinforcing value, and prompting action.

---

## 3. Leaderboard Filters

On the **Admin Leaderboard** screen, provide:

* **Timeframe Selector**: All time / Last 30 days / Last 7 days / Custom date range
* **Metrics Tabs**: XP | Sales | Commissions | Referral Boost
* **Search Box**: Filter by volunteer name or referral code
* **Export CSV**: Download current view

This empowers admins to spot top performers and identify trends.

---

# Phase 1 Database Schema (Final)

| Table                                              | Key Columns                                                                                         |
| -------------------------------------------------- | --------------------------------------------------------------------------------------------------- |
| `decidim_volunteer_scheduler_volunteer_profiles`   | `user_id`, `referral_code`, `level`, `total_xp`                                                     |
| `decidim_volunteer_scheduler_task_templates`       | `component_id`, `title`, `description`, `level`, `category`, `active`                               |
| `decidim_volunteer_scheduler_task_assignments`     | `task_template_id`, `assignee_id`, `status`, `assigned_at`, `completed_at`, `xp_awarded`, `comment` |
| `decidim_volunteer_scheduler_referrals`            | `referrer_id`, `referred_id`, `level`                                                               |
| `decidim_volunteer_scheduler_scicent_transactions` | `user_id`, `action`, `amount`, `source_type`, `source_id`, `created_at`                             |

All tables include `organization_id` if/when multi-org scoping is added in Phase 2.

---

# Phase 1 UI Wireframes (Textual)

### Volunteer Dashboard

* **Section: Failed Assignments** (if any)

  * \[Task name] \[Retry button] \[Admin comment]
* **Section: Available Tasks**

  * Filters: Level (`1–3`)
  * List of tasks (title, XP reward, “Accept” button)
* **Section: My Assignments**

  * Pending / Submitted / Approved tabs
* **Referral Code**

  * Copyable input + share button
* **Notifications Bell** (in-app only)

### Admin Panel

* **Settings** tab (all JSON/number inputs)
* **Task Templates** CRUD
* **Assignments**

  * Bulk “Approve All” / “Reject All” actions
  * Individual review with comment
* **Leaderboard**

  * Timeframe dropdown + metric tabs
  * Table: Name | Level | XP | Sales | Commissions | Referral Boost
  * Export CSV button

### Monthly Statement Email

Subject: “Your \[Month] Volunteer Summary”

Body regions as detailed above.

---

With this, you have a **fully defined Phase 1 scope**—database, core flows, admin and volunteer UIs, email structure, and everything needed to start implementation. Let me know when you’re ready to begin coding or if any area needs further clarity!
