<% add_decidim_page_title(t(".title", task: @assignment.task_template.title)) %>

<div class="row">
  <div class="columns large-8 large-centered">
    <div class="card">
      <div class="card-divider">
        <h2 class="card-title">
          <%= t(".title", task: @assignment.task_template.title) %>
        </h2>
      </div>
      
      <div class="card-section">
        <div class="callout primary">
          <h6><%= t(".task_details") %></h6>
          <p><%= simple_format(@assignment.task_template.description) %></p>
          <p>
            <strong><%= t(".assigned_date") %>:</strong> <%= l(@assignment.assigned_at, format: :long) %><br>
            <strong><%= t(".due_date") %>:</strong> <%= l(@assignment.due_date, format: :long) if @assignment.due_date %>
          </p>
        </div>
        
        <%= decidim_form_for @form, url: task_assignment_submissions_path(@assignment), html: { class: "form" } do |f| %>
          
          <div class="field">
            <%= f.label :report %>
            <%= f.text_area :report, rows: 10, required: true %>
            <p class="help-text"><%= t(".report_help") %></p>
          </div>
          
          <div class="row">
            <div class="columns medium-6">
              <div class="field">
                <%= f.label :hours_worked %>
                <%= f.number_field :hours_worked, step: 0.25, min: 0.25, max: 100, required: true %>
                <p class="help-text"><%= t(".hours_help") %></p>
              </div>
            </div>
          </div>
          
          <div class="field">
            <%= f.label :challenges_faced %>
            <%= f.text_area :challenges_faced, rows: 5 %>
            <p class="help-text"><%= t(".challenges_help") %></p>
          </div>
          
          <div class="field">
            <%= f.label :additional_notes %>
            <%= f.text_area :additional_notes, rows: 3 %>
            <p class="help-text"><%= t(".additional_notes_help") %></p>
          </div>
          
          <% if false # Disable attachments for now until properly configured %>
            <div class="field">
              <%= f.label :attachments %>
              <%= f.upload :attachments, multiple: true, optional: true %>
              <p class="help-text"><%= t(".attachments_help") %></p>
            </div>
          <% end %>
          
          <div class="actions">
            <%= f.submit t(".submit"), class: "button button--highlight" %>
            <%= link_to t(".cancel"), task_assignment_path(@assignment), class: "button button--text" %>
          </div>
          
        <% end %>
      </div>
    </div>
  </div>
</div>